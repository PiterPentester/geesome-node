<div id="chat-page">
    <div class="groups-container">
        <div class="groups-list">
            <group-item v-for="(group, index) in groups" :group="group"
                        :active="selectedGroupId === group.ipns"
                        :last-message="group.lastMessage"
                        @click.native="selectGroup(group)"
            ></group-item>

            <md-button class="md-primary add-group-button" @click="addFriend"><md-icon>add</md-icon> Add friend</md-button>
        </div>
        
        <div class="chat-control">
            <md-button class="md-primary md-icon-button" :disabled="true"><md-icon>settings</md-icon></md-button>
            <md-button class="md-primary md-icon-button" @click="addFriend"><md-icon>add</md-icon></md-button>
        </div>
    </div>
    <div class="chat-container">
        
        <md-progress-bar v-if="messagesLoading" class="md-accent" md-mode="indeterminate"></md-progress-bar>

        <div class="welcome" v-if="selectedGroupId === null">
            <div class="welcome-message">
                <div class="welcome-icon"><md-icon>help</md-icon></div>
                <div class="welcome-text">
                    You can create personal chats by adding friends or public chats.
                </div>
            </div>
        </div>
        
        <div class="chat" v-if="selectedGroupId !== null">
            <message-item v-for="message in messages" :message="message" :message-authors="messagesAuthors"></message-item>
        </div>
        
        <div class="new-message" v-if="selectedGroupId !== null">
            <div class="attachment"><md-icon>attach_file</md-icon></div>
            <div class="input">
                <input type="text" placeholder="Write a message...">
            </div>
            <div class="emoji"><md-icon>sentiment_satisfied_alt</md-icon></div>
        </div>
    </div>
</div>
